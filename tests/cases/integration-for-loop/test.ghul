namespace Test is
    class Main is
        entry() static is
            @IL.entrypoint()

            System.Console.write_line("iterable"); 

            for i in new Iterable() do
                System.Console.write_line("index: " + i); 
            od

            System.Console.write_line("iterator"); 

            for i in new Iterable().iterator do
                System.Console.write_line("index: " + i); 
            od

            System.Console.write_line("iterator"); 

            for i in new Iterator() do
                System.Console.write_line("index: " + i); 
            od
        si
    si

    class Iterable is
        iterator: Iterator is return new Iterator(); si

        init() is            
        si        
    si

    class Iterator is
        _count: int;

        init() is
            _count = 5;
        si
        
        move_next() -> bool is
            _count = _count - 1;
            return _count >= 0;
        si

        current: int is
            return _count;    
        si                
    si
si

@IL.stub()
namespace System is
    @IL.name("[mscorlib]System.Console")
    class Console is
        @IL.name("WriteLine")
        write_line(text: String) static;
    si
si