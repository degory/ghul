namespace Ghul is
    use Collections;

    @KEEP()
    trait Range[T] is
        from: T;
        to: T;
    si

    @KEEP()
    struct INT_RANGE: Range[int], Iterable[int], Iterator[int] is
        @IL.name.read("GetEnumerator")
        iterator: Iterator[int] => self;

        @IL.name.read("get_Current")
        current: int;

        from: int => current + 1;
        to: int;
 
        init(from: int, to: int) is
            current = from - 1;
            self.to = to;
        si

        @IL.name("MoveNext")
        move_next() -> bool is
            current = current + 1;
            return current < to;
        si        
    si

    @KEEP()
    struct INT_RANGE_INCLUSIVE: Range[int], Iterable[int], Iterator[int] is
        @IL.name.read("GetEnumerator")
        iterator: Iterator[int] => self;

        from: int => current + 1;
        to: int;

        @IL.name.read("get_Current")
        current: int;

        init(from: int, to: int) is
            current = from - 1;
            self.to = to;
        si

        @IL.name("MoveNext")
        move_next() -> bool is
            current = current + 1;
            return current <= to;
        si        
    si
si
