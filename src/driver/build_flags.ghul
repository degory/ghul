namespace Driver is
    @IF.not.v3() use object = System.Object;
    @IF.not.v3() use string = System.String;
    @IF.not.v3() use Std = System.Console;

    use System;

    class BUILD_FLAGS is
        is_valid: bool;

        want_analyse: bool public;
        want_stubs: bool public;
        want_declare_symbols: bool public;
        want_compile_expressions: bool public;
        want_executable: bool public;
        want_assembler: bool public;
        dump_tree: bool public;
        ignore_errors: bool public;
        exclude_runtime_symbols: bool public;

        init() is
        si

        mark_valid() is
            is_valid = true;
        si

        check_valid() is
            assert is_valid else "build flags accessed before being set";
        si

        copy() -> BUILD_FLAGS is
            return cast BUILD_FLAGS(Shim.OBJ.shallow_clone(self));
        si
    si
si