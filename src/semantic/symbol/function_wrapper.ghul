namespace Semantic is
    use System.String;

    use Symbol.Function;

    class FUNCTION_WRAPPER is
        _hash: int;
        _root_function: Symbol.BASE;

        function: Function;

        =~(other: System.Object) -> bool is
            if !other? then
                return false;
            elif !isa FUNCTION_WRAPPER(other) then
                return false;
            fi

            return self =~ cast FUNCTION_WRAPPER(other);
        si

        =~(other: FUNCTION_WRAPPER) -> bool is
            let result = _root_function == other._root_function;

            if result then
                @IF.debug()  System.Console.write_line("compare functions: " + _root_function + " vs " + other._root_function);
                
                // if function.return_type !~ other.function.return_type then
                //     System.Console.write_line("samme functions but different return types: " + function + " vs " + other.function);
                // fi                
            fi            

            return result;
        si
        
        init(function: Function) is
            _root_function = function.root_specialized_from;

            @IF.legacy()
            _hash = _root_function.hash();

            @IF.dotnet()
            _hash = _root_function.get_hash_code();

            self.function = function;
        si
        
        hash() -> int => _hash;

        toString() -> String => "" + function; //  + " (from " + _root_function + ", hash: " + _hash + ")";
    si
si
