// import glist;
namespace Syntax is
    use System;
    use Generic;
    use Source;
    namespace Tree is
        class NODE  is
            _next_id: int static;
            _id: int;
            location: LOCATION;
            id: int public => _id;

            next_id: int static is
                var result = _next_id;
                _next_id = _next_id + 1;
                return result;
            si

            init(location: LOCATION) is
                _id = next_id;
                self.location = location;
            si

            hash() -> int is
                return id;
            si

            invalidate(from: Iterable[Deletable[NODE]]) is
                for d in from do
                    d.delete(self);
                od
                
                _id = next_id;
            si

            =~(other: NODE) -> bool is
                return _id == other._id;
            si

            >(other: NODE) -> int is
                return _id - other._id;
            si

            clone() -> NODE is
                let result = cast NODE(super.clone());   

                result._id = next_id;         
            si
            
            accept(visitor: Visitor) is
                visitor.visit(self);
            si

            walk(visitor: Visitor) is
                accept(visitor);
            si

            rewrite(m: Dict[NODE,NODE]) is
            si

            toString() -> String is
                var printer = new Process.Printer.GHUL();
                accept(printer);
                return printer.result;
            si

        si

    si
si
