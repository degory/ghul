namespace Test is
    use IO.Std.write_line;

    class Base is
    si

    class DerivedA: Base is
        init() is si

        check() -> bool is
            write_line("DerivedA.check() is true");
            
            return true;
        si
    si
   
    class DerivedB: Base is
        init() is si

        check() -> bool is
            write_line("DerivedB.check() is false");
            
            return false;
        si        
    si

    class DerivedC: Base is
        _count: int;

        init() is si

        check() -> bool is
            _count = _count + 1;

            let result = if _count % 2 == 0 then true else false fi;

            write_line("DerivedC.check() " + _count + " is " + result);
            
            return result;
        si
    si

    test(a: string, b: string) is
        write_line(a, b)
    si

    entry() is
        test_if();
        test_if();
    si

    test_if() is
        let da = new DerivedA();
        let db = new DerivedB();

        if if da.check() then true else false fi then
            write_line("da.check() is true");
        else
            write_line("da.check() is false");
        fi;

        if if db.check() then da.check() else db.check() fi then
            write_line("db.check() is true");
        else
            write_line("db.check() is false");
        fi;
    si
si